{
  "openapi":"3.1.0",
  "info":{
    "title":"Eptran API",
    "description":"API de controle de usuários, notícias e jogos do Eptran.",
    "contact":{
      "email":"eptran@joinville.sc.gov.br",
      "name":"Eptran"
    },
    "version":"1.0.0"
  },
  "servers": [
    {
      "url":"http://localhost:5000",
      "description": "API"
    }
  ],
  "paths": {
    "/users/register":{
      "post":{
        "summary":"Cadastro de usuário",
        "description":"Essa é a rota responsável por cadastrar um novo usuário",
        "tags":["Users"],
        "requestBody": {
          "content":{
            "application/json": {
              "schema":{
                "$ref":"#/components/schemas/RegisterUser"
              }
            }
          }
        },
        "responses":{
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "type":"object",
                  "$ref": "#/components/schemas/ReturnUser"
                }
              }
            }
          }
        }
      }
    },
    "/users/login":{
      "post":{
        "summary":"Login de usuário",
        "description":"Essa é a rota responsável por gerar o token do usuário",
        "tags":["Users"],
        "requestBody": {
          "content":{
            "application/json": {
              "schema":{
                "properties":{
                  "email":{
                    "type":"string",
                    "format":"email"
                  },
                  "password":{
                    "type":"string"
                  }
                }
              }
            }
          }
        },
        "responses":{
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "properties":{
                    "token":{
                      "type":"string"
                    },
                    "user":{
                      "$ref":"#/components/schemas/ReturnUser"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/index":{
      "get":{
        "summary":"Listar usuários",
        "description":"Essa rota é responsável por listar todos os usuários",
        "tags":["Users"],
        "security": [{"bearerAuth": []}],
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
            "application/json":{
              "schema":{
                "type": "array",
                "items":{
                  "$ref": "#/components/schemas/ReturnUser"
                }
              }
          }
        }
      }
        }
      }
    },
    "/users/id/{id}":{
      "get":{
        "summary":"Buscar usuário por ID",
        "security": [{"bearerAuth": []}],
        "description":"Essa é a rota responsável por buscar um usuário pelo seu ID",
        "tags":["Users"],
        "parameters":[
          {
          "name":"id",
          "schema":{
            "type":"integer"
          },
          "in":"path",
          "description":"ID do usuário",
          "required": true
        }
        ],
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
            "application/json":{
              "schema":{
                "type": "object",
                "$ref": "#/components/schemas/ReturnUser"
              }
          }
        }
      }
        }
      }
    },
    "/users/update":{
      "put":{
        "summary":"Atualização de usuário",
        "description":"Essa é a rota responsável por atualizar as informações do usuário.",
        "tags":["Users"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "content":{
            "application/json": {
              "schema":{
                "$ref":"#/components/schemas/RegisterUser",
                "example":{
                  "user_name": "",
                  "user_lastname": "",
                  "user_email": "",
                  "user_password": "",
                  "confirmpassword": "",
                  "user_birthdate": "",
                  "user_sex": "",
                  "user_education": ""
                }
              }
            }
          }
        },
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "properties":{
                    "user":{
                      "$ref":"#/components/schemas/ReturnUser"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/delete":{
      "delete":{
        "summary":"Deletar usuário",
        "description":"Essa é a rota responsável por deletar o usuário",
        "tags":["Users"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "content":{
            "application/json": {
              "schema":{
                "properties":{
                  "password":{
                    "type":"string"
                  }
                }
              }
            }
          }
        },
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "properties":{
                    "user":{
                      "$ref":"#/components/schemas/ReturnUser"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/upload":{
      "put":{
        "summary":"Imagem de perfil do usuário",
        "description":"Essa rota é responsável pelo upload da imagem de perfil do usuário",
        "tags":["Users"],
        "security": [{"bearerAuth": []}],
        "requestBody":{
          "content":{
            "multipart/form-data":{
              "schema":{
                "type":"object",
                "properties":{
                  "file":{
                    "type":"string",
                    "format":"binary"
                  }
                }
              }
            }
          }
        },
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    },
                    "file":{
                      "type":"object"
                    }
                  }
                }
              }
            }
          }
        }

      }
    },
    "/users/removeimage":{
      "put":{
        "summary":"Remove imagem de perfil do usuário",
        "description":"Essa rota é responsável pela remoção da imagem de perfil do usuário",
        "tags":["Users"],
        "security": [{"bearerAuth": []}],
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }

      }
    },
    "/news/add":{
      "post":{
        "summary":"Adicionar notícia",
        "description":"Essa rota é responsável por adicionar novas notícias",
        "tags":["News"],
        "security": [{"bearerAuth": []}],
        "requestBody":{
          "content":{
            "multipart/form-data":{
              "schema":{
                "$ref":"#/components/schemas/AddNews"
              }
            }
          }
        },
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "$ref":"#/components/schemas/ReturnNews"
                }
              }
            }
          }
        }

      }
    },
    "/news/index":{
      "get":{
        "summary":"Listar notícias.",
        "description":"Essa é a rota responsável por buscar e listar todas as notícias.",
        "tags":["News"],
        "responses":{
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
            "application/json":{
              "schema":{
                "type": "array",
                "items":{
                  "$ref": "#/components/schemas/ReturnNews"
                }
              }
          }
        }
      },
      "404":{
        "description":"Not Found",
        "content": {
          "application/json":{
            "schema":{
              "type":"object",
              "properties":{
                "msg":{
                  "type": "string"
                }
              }
            }
          }
        }
      }
        }
      }
    },
    "/news/id/{id}":{
      "get":{
        "summary":"Buscar notícia por ID",
        "description":"Essa é a rota responsável por buscar uma notícia pelo seu ID",
        "tags":["News"],
        "parameters":[
          {
          "name":"id",
          "schema":{
            "type":"integer"
          },
          "in":"path",
          "description":"ID da notícia",
          "required": true
        }
        ],
        "responses":{
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
            "application/json":{
              "schema":{
                "type": "object",
                "$ref": "#/components/schemas/ReturnNews"
              }
          }
        }
      }
        }
      }
    },
    "/news/userid/{id}":{
      "get":{
        "summary":"Listar notícias escritas por um usuário.",
        "description":"Essa é a rota responsável por buscar e listar todas as notícias escritas pelo usuário em que o ID foi fornecido.",
        "tags":["News"],
        "parameters":[
          {
          "name":"id",
          "schema":{
            "type":"integer"
          },
          "in":"path",
          "description":"ID do usuário",
          "required": true
        }
        ],
        "responses":{
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
            "application/json":{
              "schema":{
                "type": "array",
                "items":{
                  "$ref": "#/components/schemas/ReturnNews"
                }
              }
          }
        }
      },
      "404":{
        "description":"Not Found",
        "content": {
          "application/json":{
            "schema":{
              "type":"object",
              "properties":{
                "msg":{
                  "type": "string"
                }
              }
            }
          }
        }
      }
        }
      }
    },
    "/news/update/{id}":{
      "put":{
        "summary":"Atualizar notícia",
        "description":"Essa rota é responsável por atualizar uma notícia (O que não deseja atualizar, deixe em branco)",
        "tags":["News"],
        "parameters":[
          {
          "name":"id",
          "schema":{
            "type":"integer"
          },
          "in":"path",
          "description":"ID do usuário",
          "required": true
        }
        ],
        "security": [{"bearerAuth": []}],
        "requestBody":{
          "content":{
            "multipart/form-data":{
              "schema":{
                "$ref":"#/components/schemas/AddNews"
              }
            }
          }
        },
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "$ref":"#/components/schemas/ReturnNews"
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }

      }
    },
    "/news/delete/{id}":{
      "delete":{
        "summary":"Apagar notícia",
        "description":"Essa é a rota responsável por apagar uma notícia",
        "tags":["News"],
        "parameters":[
          {
          "name":"id",
          "schema":{
            "type":"integer"
          },
          "in":"path",
          "description":"ID da notícia",
          "required": true
        }
        ],
        "security": [{"bearerAuth": []}],
        "responses":{
          "401":{
            "description": "Unauthorized",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description": "Bad Request",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500":{
            "description": "Internal server error",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "200":{
            "description":"OK",
            "content":{
              "application/json": {
                "schema":{
                  "$ref":"#/components/schemas/ReturnNews"
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content": {
              "application/json":{
                "schema":{
                  "type":"object",
                  "properties":{
                    "msg":{
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components":{
    "schemas":{
      "RegisterUser": {
        "type":"object",
        "properties":{
          "user_name": {
            "type": "string"
          },
          "user_lastname": {
            "type": "string"
          },
          "user_email": {
            "type": "string",
            "format":"email"
          },
          "user_password": {
            "type": "string"
          },
          "confirmpassword": {
            "type": "string"
          },
          "user_birthdate": {
            "type": "string",
            "format": "date"
          },
          "user_sex": {
            "type": "string",
            "enum": ["male","female","other"]
          },
          "user_education": {
            "type": "style",
            "enum": ["elementary_1","elementary_2","highschool"]
          }

        }
      },
      "ReturnUser": {
        "type":"object",
        "properties":{
          "user_id":{
            "type":"integer"
          },
          "user_image_path":{
            "type":"string"
          },
          "user_name": {
            "type": "string"
          },
          "user_lastname": {
            "type": "string"
          },
          "user_email": {
            "type": "string",
            "format":"email"
          },
          "user_birthdate": {
            "type": "string",
            "format": "date"
          },
          "user_sex": {
            "type": "string",
            "enum": ["male","female","other"]
          },
          "user_education": {
            "type": "style",
            "enum": ["elementary_1","elementary_2","highschool"]
          },
          "user_permission":{
            "type": "style",
            "enum": ["user","staff","adm"]
          }

        }
      },
      "AddNews":{
        "type":"object",
        "properties":{
          "news_title":{
            "type":"string"
          },
          "news_subtitle":{
            "type":"string"
          },
          "news_first_paragraph":{
            "type":"string"
          }
          ,
          "news_second_paragraph":{
            "type":"string"
          }
          ,
          "news_third_paragraph":{
            "type":"string"
          }
          ,
          "news_fourth_paragraph":{
            "type":"string"
          }
          ,
          "news_fifth_paragraph":{
            "type":"string"
          },
          "file":{
            "type":"string",
            "format":"binary"
          }
        }
      },
      "ReturnNews":{
        "type":"object",
        "properties":{
          "news_id":{
            "type":"integer"
          },
          "news_title":{
            "type":"string"
          },
          "news_subtitle":{
            "type":"string"
          },
          "news_first_paragraph":{
            "type":"string"
          }
          ,
          "news_second_paragraph":{
            "type":"string"
          }
          ,
          "news_third_paragraph":{
            "type":"string"
          }
          ,
          "news_fourth_paragraph":{
            "type":"string"
          }
          ,
          "news_fifth_paragraph":{
            "type":"string"
          },
          "news_image_path":{
            "type":"string"
          },
          "news_fk_user":{
            "type":"integer"
          }
        }
      }
    },
    "securitySchemes":{
      "bearerAuth":{
        "type":"http",
        "scheme":"bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
